인덱스 설계
===

+ 인덱스 설계가 어려운 이유

1. DML 성능 저하(-> TPS 저하)
2. 데이터베이스 사이즈 증가 (-> 디스크 공간 낭비)
3. 데이터베이스 관리 및 운영 비용 상승

+ 가장 중요한 두 가지 선택 기준

1. 조건절에 항상 사용하거나, 자주 사용하는 컬럼을 선정한다.
2. '=' 조건으로 자주 조회하는 컬럼을 앞쪽에 둔다.

+ 스캔 효울성 이외의 판단 기준

1. 수행 빈도
2. 업무상 중요도
3. 클러스터링 팩터
4. 데이터량
5. DML 부하( = 기존 인덱스 개수, 초당 DML 발생량, 자주 갱신하는 컬럼 포함 여부 등 )
6. 저장 공간
7. 인덱스 관리 비용 등

+ 공식을 초월한 전략적 설계

1. 열 개 중 최적을 달성해야 할 가장 핵심적인 액세스 경로 한두 개를 전략적으로 선택해서 최적 인덱스를 설계하고, 나머지 액세스 경로는 약간의 비효율이 있더라도 목표 성능을 만족하는 수준으로 인덱스를 구성할 수 있어야 한다.
2. 왜 그런 선택을 했는지, 전략적 판단 근거가 무엇인지 답할 수 있어야 한다.
3. 단순한 공식에 의한 결정이 아니라 업무 상황을 이해하고 나름의 판단 기준을 가지고 결정을 내리라는 것이다.


+ 소트 연산을 생략하기 위한 컬럼 추가

1. 조건절에 사용하지 않는 컬럼이더라도 소트 연산을 생략할 목적으로 인덱스 구성에 포함시킴으로써 성능 개선을 도모할 수 있다.

## I/O를 최소화하면서 소트 연산

1. '=' 연산자로 사용한 조건 컬럼 선정
2. ORDER BY 절에 기술한 컬럼 추가
3. '=' 연산자가 아닌 조건절 컬럼은 데이터 분포를 고려해 추가 여부 결정


+ 결합 인덱스 선택도

1. 인덱스 생성 여부를 결정할 때는 선택도가 충분히 낮은지가 중요한 판단 기준이다.

## 선택도란
```
전체 레코드 중에서 조건절에 의해 선택되는 레코드 비율을 말하며 선택도에 총 레코드 수를 곱해서 카디널리티를 구한다.
```

## 인덱스 선택도

```
인덱스 컬럼을 모두 '='로 조회할 때 평균적으로 선택되는 비율을 의미한다.
```

2. 선택도가 높은 인덱스는 생성해봐야 효용가치가 별로 없다.
